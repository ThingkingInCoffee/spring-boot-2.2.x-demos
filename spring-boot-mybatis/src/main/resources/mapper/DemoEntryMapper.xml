<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hzy.mybatis.mapper.DemoEntryMapper" >
  <!--配置开启全局二级缓存-->
  <!--eviction 指定缓存过期策略 默认LRU 可选 LRU FIFO SOFT WEAK-->
  <!--flushInterval 指定缓存刷新间隔 默认不刷新，仅在调用时刷新-->
  <!--size 指定缓存引用数目 默认 1024-->
  <!--readOnly 只读 返回缓存对象的相同示例，缓存对象不能修改，性能好。读写模式返回缓存对象的拷贝，速度慢些-->
  <!--type 指定自定义缓存实现-->
  <!--定义全局缓存配置之后，也可以在单个语句配置中通过 useCache 属性控制使用缓存以及flushCache属性-->
  <!--<cache eviction="LRU" flushInterval="60000" size="1024" readOnly="false" type="com.domain.something.MyCustomCache"/>-->
  <!--指定使用其他 namespace 的缓存配置-->
  <!--<cache-ref namespace="com.someone.application.data.SomeMapper"/>-->
  <resultMap id="BaseResultMap" type="com.hzy.mybatis.entry.DemoEntry" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="demo_name" property="demoName" jdbcType="VARCHAR" />
    <result column="demo_type" property="demoType" jdbcType="TINYINT" />
    <result column="zip_code" property="zipCode" jdbcType="CHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, demo_name, demo_type, zip_code, create_time, update_time
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from demo_entry
    where id = #{id,jdbcType=INTEGER}
  </select>
  <!--flushCache 清空缓存设置为 true 后，只要语句被调用，都会导致本地缓存和二级缓存被清空，默认值：false。-->
  <select id="selectDemo" parameterType="int"  resultType="com.hzy.mybatis.entry.DemoEntry" flushCache="false" useCache="true"
          timeout="10" fetchSize="256" statementType="PREPARED" resultSetType="FORWARD_ONLY">
    select * from demo_entry where id = #{id,jdbcType=INTEGER}
  </select>
  <insert id="insertDemo" parameterType="com.hzy.mybatis.entry.DemoEntry">
        insert into demo_entry (demo_name, demo_type, zip_code, create_time)
        values (#{demoName}, #{demoType}, #{zipCode}, now());
  </insert>
  <update id="updateDemo">
        update demo_entry set demo_name = #{arg1} where id = #{arg0};
  </update>
  <delete id="deleteDemo">

  </delete>
</mapper>